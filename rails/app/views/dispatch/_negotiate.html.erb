<div ng-controller="NegotiationController">
  <div id="negotiation_modal" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Location negotiation</h4>
        </div>
        <div class="modal-body">
          <div class="col-xs-6" id="chat">
            <div id="messages">
              <div class="message" ng-repeat="chatMessage in chatMessages">
                <span class="sender">{{chatMessage.sender}}:</span>
                <span class="text">{{chatMessage.text}}</span>
              </div>
            </div>
            <form ng-submit="sendMessage()">
              <hr>
              <input class="form-control" type="text" ng-model="messageDraft" placeholder="Type message" />
            </form>
          </div>

          <div class="col-xs-6" id="place">
            <div class="panel panel-default">
              <div class="panel-heading">Location</div>
              <div class="panel-body">
                <select ng-model="placeCategory" ng-options="c.name group by c.category for c in placeCategories track by c.catId" ng-change="pushPlaceCategoryUpdate()"></select>
                <select ng-model="place" ng-options="p.name for p in places track by p.place_id" ng-change="pushPlaceUpdate()"></select>
              </div>
            </div>
          </div>

          <div class="clearfix"></div>
        </div>
        <div class="modal-footer">
          <button ng-show="isTutor" class="btn btn-primary" ng-click="startTutoring()">Start tutoring</button>
          <button ng-hide="isTutor" class="btn btn-default" ng-click="startTutoring()" disabled>Wait for tutor to start</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</div>
